<section class="our-products-section">
    
    <div>
        <h1 class="title">Our <span class="title-product">Products</span></h1>
        <div class=" our-products-container">
            <button class="prev-button">o
            </button>
            <div class="card"><img class="img" src="/src/images/orange.jpg" alt="orange">
                <h3 class="item-name">orange</h3>
                <p class="item-description">
                    Dark chocolate
                </p>
                <div>
                    <button class="b-box">45 UAH</button>
                </div>
            </div>
            <div class="card"><img class="img" src="/src/images/apple&cranberry.jpg" alt="apple">
                <h3 class="item-name">apple&cranberry</h3>
                <p class="item-description">
                    Milk chocolate
                </p>
                <div>
                    <button class="b-box">50 UAH</button>
                </div>
            </div>
            <div class="card"><img class="img" src="/src/images/lime&seasalt.jpg" alt="seasalt">
                <h3 class="item-name">lime&sea salt</h3>
                <p class="item-description">
                    Dark chocolate
                </p>
                <div>
                    <button class="b-box">66 UAH</button>
                </div>
            </div>
            <div class="card"><img class="img" src="/src/images/pineapple.jpg" alt="pineapple">
                <h3 class="item-name">pineapple</h3>
                <p class="item-description">
                    Dark chocolate
                </p>
                <div>
                    <button class="b-box">54 UAH</button>
                </div>
            </div>
            <div class="card"><img class="img" src="/src/images/classicmilk.jpg" alt="milk">
                <h3 class="item-name">classic</h3>
                <p class="item-description">
                    Milk chocolate
                </p>
                <div>
                    <button class="b-box">45 UAH</button>
                </div>
            </div>
            <div class="card"><img class="img" src="/src/images/honey.jpg" alt="honey">
                <h3 class="item-name">honey</h3>
                <p class="item-description">
                    Milk chocolate
                </p>
                <div>
                    <button class="b-box">50 UAH</button>
                </div>
            </div>
            <div class="card"><img class="img" src="/src/images/roastedwinterfruits.jpg" alt="winterfruits">
                <h3 class="item-name">roasted fruits</h3>
                <p class="item-description">
                    Dark chocolate
                </p>
                <div>
                    <button class="b-box">66 UAH</button>
                </div>
            </div>
            <div class="card"><img class="img" src="/src/images/classicwhite.jpg" alt="white">
                <h3 class="item-name">classic</h3>
                <p class="item-description">
                    white chocolate
                </p>
                <div>
                    <button class="b-box">54 UAH</button>
                </div>

            </div>
        </div>
        <div>
        <button class="next-button">></button>
        
    </div>

    <div class="dot-navigation">
        <span class="dot"></span>
        <span class="dot"></span>
        <span class="dot"></span>
        <span class="dot"></span>

    </div>

</section>
<script>
    document.addEventListener("DOMContentLoaded", function () {
        const cardsContainer = document.querySelector('.our-products-container');
        const cards = document.querySelectorAll('.card');
        const dotNavigation = document.querySelector('.dot-navigation');
        const dots = document.querySelectorAll('.dot');
        const cardCount = cards.length;
        let currentIndex = 0;
        let isDragging = false;
        let startX;

        function showCards(index) {
            cards.forEach((card, i) => {
                const newIndex = (i + index) % cardCount;
                card.style.display = i >= index && i < index + 4 ? 'block' : 'none';
            });
        }

        function updateDots(index) {
            dots.forEach((dot, i) => {
                dot.classList.toggle('active', i === index / 4);
            });
        }

        function showNextCards() {
            currentIndex = (currentIndex + 4) % cardCount;
            cardsContainer.style.transition = 'left 0.5s ease-in-out';
            cardsContainer.style.left = `-${currentIndex * 100}%`;
            showCards(currentIndex);
            updateDots(currentIndex);
        }

        function showPrevCards() {
            currentIndex = (currentIndex - 4 + cardCount) % cardCount;
            cardsContainer.style.transition = 'left 0.5s ease-in-out';
            cardsContainer.style.left = `-${currentIndex * 100}%`;
            showCards(currentIndex);
            updateDots(currentIndex);
        }

        document.querySelector('.prev-button').addEventListener('click', () => {
            showPrevCards();
            setTimeout(() => {
                cardsContainer.style.transition = ''; // Reset transition after animation
            }, 500);
        });

        document.querySelector('.next-button').addEventListener('click', () => {
            showNextCards();
            setTimeout(() => {
                cardsContainer.style.transition = ''; // Reset transition after animation
            }, 500);
        });

        cardsContainer.addEventListener('mousedown', (e) => {
            isDragging = true;
            startX = e.clientX;
        });

        document.addEventListener('mousemove', (e) => {
            if (isDragging) {
                const deltaX = e.clientX - startX;
                const threshold = 50; // Adjust this threshold as needed
                if (deltaX > threshold) {
                    showPrevCards();
                    startX = e.clientX;
                } else if (deltaX < -threshold) {
                    showNextCards();
                    startX = e.clientX;
                }
            }
        });

        document.addEventListener('mouseup', () => {
            isDragging = false;
            setTimeout(() => {
                cardsContainer.style.transition = ''; // Reset transition after dragging
            }, 500);
        });

        function highlightDot(index) {
            dots.forEach((dot, i) => {
                dot.classList.toggle('active', i === index);
            });
        }

        cards.forEach((card, i) => {
            card.addEventListener('mouseover', () => {
                const cardIndex = (currentIndex + i) % cardCount;
                highlightDot(cardIndex);
            });

            card.addEventListener('mouseout', () => {
                highlightDot(currentIndex);
            });
        });

        // Initial display
        showCards(currentIndex);
        updateDots(currentIndex);
    });

</script>